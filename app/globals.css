@import 'tailwindcss';
@plugin '@tailwindcss/typography';

:root {
  /* Typography */
  --base-font-size: 14px;
  --base-line-height: 20px;

  /* Color tokens - Light mode (default) */
  --bg-base: #fafaf9;
  --fg-base: #0f0d0d;
  --fg-subtle: rgba(15, 14, 13, 0.7);
  --fg-muted: rgba(15, 14, 13, 0.6);
  --border-base: rgba(15, 14, 13, 0.1);
  --interactive-base: #f0f0f0;

  /* Scrollbar colors */
  --scrollbar-thumb: rgba(15, 14, 13, 0.2);
  --scrollbar-thumb-hover: rgba(15, 14, 13, 0.35);
}

.dark {
  /* Color tokens - Dark mode */
  --bg-base: #0f0e0d;
  --fg-base: #fafaf9;
  --fg-subtle: rgba(250, 250, 249, 0.7);
  --fg-muted: rgba(250, 250, 249, 0.6);
  --border-base: rgba(250, 250, 249, 0.1);
  --interactive-base: #1d1d1d;

  /* Scrollbar colors */
  --scrollbar-thumb: rgba(250, 250, 249, 0.2);
  --scrollbar-thumb-hover: rgba(250, 250, 249, 0.35);
}

/* Base styles */
@layer base {
  html {
    font-size: var(--base-font-size, 14px);
    line-height: var(--base-line-height, 20px);
  }

  body {
    font-family: var(--font-abc-marist), sans-serif;
  }

  .font-mono {
    font-family: var(--font-jetbrains-mono), ui-monospace, 'SF Mono', monospace !important;
    font-weight: 500;
  }

  /* Design token utilities */
  .bg-base {
    background-color: var(--bg-base);
  }

  .fg-base {
    color: var(--fg-base);
  }

  .fg-subtle {
    color: var(--fg-subtle);
  }

  .fg-muted {
    color: var(--fg-muted);
  }

  /* Hover variants for foreground colors */
  .hover\:fg-base:hover {
    color: var(--fg-base);
  }

  .hover\:fg-subtle:hover {
    color: var(--fg-subtle);
  }

  .hover\:fg-muted:hover {
    color: var(--fg-muted);
  }

  .border-base {
    border-color: var(--border-base);
  }

  .bg-interactive {
    background-color: var(--interactive-base);
  }

  /* Styled link with hover state */
  .link-styled {
    color: var(--fg-subtle);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .link-styled:hover {
    color: var(--fg-base);
  }

  /* Theme transition */
  body {
    background-color: var(--bg-base);
    color: var(--fg-base);
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  /* Temporarily disabled Geist overrides to use Reckless everywhere */
  /* .text-xs,
  .text-sm,
  .text-[10px],
  .text-[11px],
  .text-[12px],
  [class*='text-xs'],
  [class*='text-sm'],
  [class*='text-[10px]'],
  [class*='text-[11px]'],
  [class*='text-[12px]'] {
    font-family: var(--font-geist), sans-serif !important;
  } */

  /* Also apply Geist to specific semantic elements */
  /* time,
  .metadata,
  .caption,
  .small-text {
    font-family: var(--font-geist), sans-serif;
  } */

  /* Override parent font for text-xs and text-sm */
  /* .font-\[family-name\:var\(--font-reckless-neue\)\] .text-xs,
  .font-\[family-name\:var\(--font-reckless-neue\)\] .text-sm {
    font-family: var(--font-geist), sans-serif !important;
  } */

  /* Headers use ABC Marist font */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-abc-marist), sans-serif;
  }

  /* Default border color */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--border-base);
  }

  ::selection {
    background-color: var(--interactive-base);
    color: var(--fg-base);
  }
}

/* Prevent layout shift from scrollbar */
html {
  overflow-y: scroll;
  scrollbar-gutter: stable;
  /* Firefox */
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

/* For Chrome, Safari, and Edge */
::-webkit-scrollbar {
  width: 4px;
  background-color: transparent;
}

::-webkit-scrollbar-track {
  background-color: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 4px;
  transition: background-color 0.3s ease;
}

/* Show scrollbar only when scrolling */
html:hover::-webkit-scrollbar-thumb,
html:focus::-webkit-scrollbar-thumb,
html:focus-within::-webkit-scrollbar-thumb,
html:active::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb);
}

html:hover::-webkit-scrollbar-thumb:hover {
  background-color: var(--scrollbar-thumb-hover);
}

/* Firefox - show scrollbar only when hovering/scrolling */
@supports (scrollbar-width: thin) {
  html:hover,
  html:focus-within,
  html:active {
    scrollbar-color: var(--scrollbar-thumb) transparent;
  }
}

/* Syntax highlighting for code blocks */
:root {
  --sh-class: #7aa2f7;
  --sh-sign: #89ddff;
  --sh-string: #9ece6a;
  --sh-keyword: #bb9af7;
  --sh-comment: #565f89;
  --sh-jsxliterals: #7aa2f7;
  --sh-property: #73daca;
  --sh-entity: #e0af68;
}

.shiki span {
  color: var(--sh-foreground);
  --sh-identifier: #d8dee9;
  --sh-sign: #81a1c1;
  --sh-property: #5e81ac;
  --sh-string: #a3be8c;
  --sh-string-escape: #d08770;
  --sh-class: #8fbcbb;
  --sh-constant: #d8dee9;
  --sh-keyword: #81a1c1;
  --sh-comment: #616e88;
  --sh-jsxliterals: #5e81ac;
  --sh-function: #88c0d0;
  --sh-entity: #e0af68;
}

/* -- Pre-steps before the animation sequence -- */
@keyframes skeleton_loading {
  0% {
    background-position: 200% 0;
  }

  to {
    background-position: -200% 0;
  }
}

/* -- Skeleton Wrapper and Loading Animation -- */
.skeleton_wrapper {
  display: block;
  border-radius: 4px;
  width: 400px;
  height: 24px;
  margin-bottom: 8px;
}

.skeleton_wrapper.skeleton_loaded {
  width: unset !important;
}

.skeleton_wrapper:not(.skeleton_animation):not(.skeleton_show) {
  display: none;
}

.skeleton_animation:not(.skeleton_show):after {
  content: none;
}

.skeleton_wrapper:not(.skeleton_animation):not(.skeleton_loaded) {
  background-image: linear-gradient(
    270deg,
    var(--bg-base),
    var(--interactive-base),
    var(--interactive-base),
    var(--bg-base)
  );
  background-size: 400% 100%;
  animation: skeleton_loading 8s ease-in-out infinite;
}

.skeleton_animation {
  display: block;
  position: relative;
}

.skeleton_animation:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 4px;
  background-image: linear-gradient(
    270deg,
    var(--bg-base),
    var(--interactive-base),
    var(--interactive-base),
    var(--bg-base)
  );
  background-size: 400% 100%;
  animation: skeleton_loading 8s ease-in-out infinite;
}

/* Spinner/Loader Animation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.spinning-icon {
  animation: spin 2s linear infinite;
}

/* Paul Calver style hover effect for featured items */
.featured-items figure {
  transition: opacity 0.3s ease;
}

.featured-items figure.not-selected {
  opacity: 0.3;
}

/* Prevent initial flash before GSAP sets state */
.featured-items img {
  opacity: 0;
  transform: scale(0.9);
}

/* Homepage GSAP scroll effect - escape layout wrappers */
.mwg_effect037 {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 40;
  overflow-y: scroll;
  overflow-x: hidden;
}

.mwg_effect037 .pin-height {
  height: 500vh;
}

.mwg_effect037 .container {
  width: 100%;
  height: 100vh;
}

/* ========================================
   View Transitions API - Theme Switching
   ======================================== */

/* Disable default crossfade animation */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* Old view (current theme) - stays in place */
::view-transition-old(root) {
  z-index: 1;
}

/* New view (incoming theme) - wipes from top to bottom */
::view-transition-new(root) {
  z-index: 9999;
  animation: theme-wipe-in 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes theme-wipe-in {
  from {
    clip-path: inset(0 0 100% 0);
  }
  to {
    clip-path: inset(0 0 0 0);
  }
}
